{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\Mat\\\\Desktop\\\\BarangayBMIS\\\\frontend\\\\src\\\\screens\\\\ResidentEditScreen.js\",\n    _s = $RefreshSig$();\n\nimport axios from 'axios';\nimport React, { useState, useEffect } from 'react';\nimport { Form, Button, Col } from 'react-bootstrap';\nimport { useDispatch, useSelector } from 'react-redux';\nimport Message from '../components/Message';\nimport Loader from '../components/Loader';\nimport FormContainerResident from '../components/FormContainerResident';\nimport { listResidentDetails, updateResident } from '../actions/residentActions';\nimport { RESIDENT_UPDATE_RESET } from '../constants/residentConstants';\n\nconst ResidentEditScreen = ({\n  match,\n  history\n}) => {\n  _s();\n\n  const residentId = match.params.id;\n  const [idNumber, setIdNumber] = useState('');\n  const [firstName, setFirstName] = useState('');\n  const [lastName, setLastName] = useState('');\n  const [middleName, setMiddleName] = useState('');\n  const [image, setImage] = useState('');\n  const [age, setAge] = useState('');\n  const [birthDay, setBirthDay] = useState('');\n  const [sex, setSex] = useState('');\n  const [phoneNumber, setPhoneNumber] = useState('');\n  const [presentAddress, setPresentAddress] = useState('');\n  const [currentAddress, setCurrentAddress] = useState('');\n  const [sitio, setSitio] = useState('');\n  const [isVoter, setIsVoter] = useState(false);\n  const [isDead, setIsDead] = useState(false);\n  const [blotter, setBlotter] = useState(false);\n  const [uploading, setUploading] = useState(false);\n  const dispatch = useDispatch();\n  const residentDetails = useSelector(state => state.residentDetails);\n  const {\n    loading,\n    error,\n    resident\n  } = residentDetails;\n  const residentUpdate = useSelector(state => state.residentUpdate);\n  const {\n    loading: loadingUpdate,\n    error: errorUpdate,\n    success: successUpdate\n  } = residentUpdate;\n  useEffect(() => {\n    if (successUpdate) {\n      dispatch({\n        type: RESIDENT_UPDATE_RESET\n      });\n      history.push('/profiling');\n    } else {\n      if (resident._id !== residentId) {\n        dispatch(listResidentDetails(residentId));\n      } else {\n        setIdNumber(resident.idNumber);\n        setFirstName(resident.firstName);\n        setLastName(resident.lastName);\n        setMiddleName(resident.middleName);\n        setImage(resident.image);\n        setAge(resident.age);\n        setBirthDay(resident.birthDay);\n        setSex(resident.sex);\n        setPhoneNumber(resident.phoneNumber);\n        setPresentAddress(resident.presentAddress);\n        setCurrentAddress(resident.currentAddress);\n        setSitio(resident.sitio);\n        setIsVoter(resident.isVoter);\n        setIsDead(resident.isDead);\n        setBlotter(resident.blotter);\n      }\n    }\n  }, [dispatch, history, residentId, resident, successUpdate]);\n\n  const uploadFileHandler = async e => {\n    const file = e.target.files[0];\n    const formData = new FormData();\n    formData.append('image', file);\n    setUploading(true);\n\n    try {\n      const config = {\n        headers: {\n          'Content-Type': 'multipart/form-data'\n        }\n      };\n      const {\n        data\n      } = await axios.post('/api/upload', formData, config);\n      setImage(data);\n      setUploading(false);\n    } catch (error) {\n      console.error(error);\n      setUploading(false);\n    }\n  };\n\n  const calcAge = bday => {\n    const from = bday.split('-');\n    const birthdateTimeStamp = new Date(from[0], from[1] - 1, from[2]);\n    const cur = new Date();\n    const diff = cur - birthdateTimeStamp; // This is the difference in milliseconds\n\n    const currentAge = Math.floor(diff / 31557600000); // Divide by 1000*60*60*24*365.25\n\n    return currentAge;\n  };\n\n  const displayEmpty = editDisplay => {\n    editDisplay === 'sample' ? editDisplay = '' : editDisplay = editDisplay;\n    return editDisplay;\n  };\n\n  const submitHandler = e => {\n    e.preventDefault();\n    dispatch(updateResident({\n      _id: residentId,\n      idNumber,\n      firstName,\n      middleName,\n      lastName,\n      image,\n      age: calcAge(birthDay),\n      sex,\n      birthDay,\n      phoneNumber,\n      presentAddress,\n      currentAddress,\n      sitio,\n      isVoter,\n      isDead,\n      blotter\n    }));\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(FormContainerResident, {\n      children: [resident.firstName === 'sample' ? /*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Add Resident\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Edit Resident\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 11\n      }, this), loadingUpdate && /*#__PURE__*/_jsxDEV(Loader, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 27\n      }, this), errorUpdate && /*#__PURE__*/_jsxDEV(Message, {\n        variant: \"danger\",\n        children: errorUpdate\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 25\n      }, this), loading ? /*#__PURE__*/_jsxDEV(Loader, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 11\n      }, this) : error ? /*#__PURE__*/_jsxDEV(Message, {\n        variant: \"danger\",\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(Form, {\n        onSubmit: submitHandler,\n        children: [/*#__PURE__*/_jsxDEV(Form.Group, {\n          controlId: \"idNumber\",\n          children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n            children: \"ID Number\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 149,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n            placeholder: \"1234 Main St\",\n            value: displayEmpty(idNumber),\n            onChange: e => setIdNumber(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 150,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Form.Row, {\n          children: [/*#__PURE__*/_jsxDEV(Form.Group, {\n            as: Col,\n            controlId: \"firstName\",\n            children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n              children: \"First Name\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 158,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n              type: \"text\",\n              placeholder: \"Enter First Name\",\n              value: displayEmpty(firstName),\n              onChange: e => setFirstName(e.target.value)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 159,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 157,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n            as: Col,\n            controlId: \"middleName\",\n            children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n              children: \"Middle Name\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 167,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n              type: \"text\",\n              placeholder: \"Enter Middle Name\",\n              value: displayEmpty(middleName),\n              onChange: e => setMiddleName(e.target.value)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 168,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 166,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n            as: Col,\n            controlId: \"lastName\",\n            children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n              children: \"Last Name\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 176,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n              type: \"text\",\n              placeholder: \"Enter Last Name\",\n              value: displayEmpty(lastName),\n              onChange: e => setLastName(e.target.value)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 177,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 175,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 156,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n          controlId: \"presentAddress\",\n          children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n            children: \"Present Address\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 186,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n            placeholder: \"1234 Main St\",\n            value: displayEmpty(presentAddress),\n            onChange: e => setPresentAddress(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 187,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 185,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n          controlId: \"currentAddress\",\n          children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n            children: \"Permanent Address\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 195,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n            placeholder: \"Apartment, studio, or floor\",\n            value: displayEmpty(currentAddress),\n            onChange: e => setCurrentAddress(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 196,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 194,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n          controlId: \"phoneNumber\",\n          children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n            children: \"Phone Number\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 203,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n            maxlength: \"11\",\n            placeholder: \"0917.......\",\n            value: displayEmpty(phoneNumber),\n            onChange: e => setPhoneNumber(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 204,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Form.Row, {\n          children: [/*#__PURE__*/_jsxDEV(Form.Group, {\n            as: Col,\n            controlId: \"birthDay\",\n            children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n              children: \"BirthDay\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 213,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n              type: \"date\",\n              placeholder: \"Enter Birthday\",\n              value: displayEmpty(birthDay),\n              onChange: e => setBirthDay(e.target.value)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 214,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 212,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n            as: Col,\n            controlId: \"age\",\n            children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n              children: \"Age\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 222,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n              type: \"text\",\n              placeholder: \"age\",\n              value: calcAge(birthDay),\n              onChange: e => setAge(e.target.value)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 223,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 221,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 211,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Form.Row, {\n          children: [/*#__PURE__*/_jsxDEV(Form.Group, {\n            as: Col,\n            controlId: \"sex\",\n            children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n              children: \"Gender\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 233,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n              as: \"select\",\n              defaultValue: \"Choose...\",\n              value: displayEmpty(sex),\n              onChange: e => setSex(e.target.value),\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                children: \"Male\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 240,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                children: \"Female\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 241,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 234,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 232,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n            as: Col,\n            controlId: \"sitio\",\n            children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n              children: \"Sitio\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 246,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n              as: \"select\",\n              defaultValue: \"Choose...\",\n              value: displayEmpty(sitio),\n              onChange: e => setSitio(e.target.value),\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                children: \"Calamansi\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 253,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                children: \"Lanzones\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 254,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                children: \"Mansanas\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 255,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                children: \"Niyugan\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 256,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                children: \"Palayan\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 257,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                children: \"Sampaloc\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 258,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                children: \"Sinturis\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 259,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 247,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 245,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 231,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n          as: Col,\n          controlId: \"image\",\n          children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n            children: \"Image\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 264,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n            type: \"text\",\n            placeholder: \"image url\",\n            value: displayEmpty(image),\n            onChange: e => setImage(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 265,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Form.File, {\n            id: \"image-file\",\n            label: \"Choose File\",\n            custom: true,\n            onChange: uploadFileHandler\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 271,\n            columnNumber: 15\n          }, this), uploading && /*#__PURE__*/_jsxDEV(Loader, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 277,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 263,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n          id: \"isVoter\",\n          children: /*#__PURE__*/_jsxDEV(Form.Check, {\n            type: \"checkbox\",\n            label: \"Registered Voter?\",\n            checked: isVoter,\n            onChange: e => setIsVoter(e.target.checked)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 281,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 280,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n          id: \"isDead\",\n          children: /*#__PURE__*/_jsxDEV(Form.Check, {\n            type: \"checkbox\",\n            label: \"Registered Deceased?\",\n            checked: isDead,\n            onChange: e => setIsDead(e.target.checked)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 289,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 288,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n          id: \"blotter\",\n          children: /*#__PURE__*/_jsxDEV(Form.Check, {\n            type: \"checkbox\",\n            label: \"Resident involved in a blotter?\",\n            checked: blotter,\n            onChange: e => setBlotter(e.target.checked)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 297,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 296,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"primary\",\n          type: \"submit\",\n          children: \"Submit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 305,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n};\n\n_s(ResidentEditScreen, \"2uDF0qdDgEQDLnCFCkz/JZm2qZc=\", false, function () {\n  return [useDispatch, useSelector, useSelector];\n});\n\n_c = ResidentEditScreen;\nexport default ResidentEditScreen;\n\nvar _c;\n\n$RefreshReg$(_c, \"ResidentEditScreen\");","map":{"version":3,"sources":["C:/Users/Mat/Desktop/BarangayBMIS/frontend/src/screens/ResidentEditScreen.js"],"names":["axios","React","useState","useEffect","Form","Button","Col","useDispatch","useSelector","Message","Loader","FormContainerResident","listResidentDetails","updateResident","RESIDENT_UPDATE_RESET","ResidentEditScreen","match","history","residentId","params","id","idNumber","setIdNumber","firstName","setFirstName","lastName","setLastName","middleName","setMiddleName","image","setImage","age","setAge","birthDay","setBirthDay","sex","setSex","phoneNumber","setPhoneNumber","presentAddress","setPresentAddress","currentAddress","setCurrentAddress","sitio","setSitio","isVoter","setIsVoter","isDead","setIsDead","blotter","setBlotter","uploading","setUploading","dispatch","residentDetails","state","loading","error","resident","residentUpdate","loadingUpdate","errorUpdate","success","successUpdate","type","push","_id","uploadFileHandler","e","file","target","files","formData","FormData","append","config","headers","data","post","console","calcAge","bday","from","split","birthdateTimeStamp","Date","cur","diff","currentAge","Math","floor","displayEmpty","editDisplay","submitHandler","preventDefault","value","checked"],"mappings":"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","sourcesContent":["import axios from 'axios'\nimport React, { useState, useEffect } from 'react'\nimport { Form, Button, Col } from 'react-bootstrap'\nimport { useDispatch, useSelector } from 'react-redux'\nimport Message from '../components/Message'\nimport Loader from '../components/Loader'\nimport FormContainerResident from '../components/FormContainerResident'\nimport { listResidentDetails, updateResident } from '../actions/residentActions'\nimport { RESIDENT_UPDATE_RESET } from '../constants/residentConstants'\n\nconst ResidentEditScreen = ({ match, history }) => {\n  const residentId = match.params.id\n  const [idNumber, setIdNumber] = useState('')\n  const [firstName, setFirstName] = useState('')\n  const [lastName, setLastName] = useState('')\n  const [middleName, setMiddleName] = useState('')\n  const [image, setImage] = useState('')\n  const [age, setAge] = useState('')\n  const [birthDay, setBirthDay] = useState('')\n  const [sex, setSex] = useState('')\n  const [phoneNumber, setPhoneNumber] = useState('')\n  const [presentAddress, setPresentAddress] = useState('')\n  const [currentAddress, setCurrentAddress] = useState('')\n  const [sitio, setSitio] = useState('')\n  const [isVoter, setIsVoter] = useState(false)\n  const [isDead, setIsDead] = useState(false)\n  const [blotter, setBlotter] = useState(false)\n  const [uploading, setUploading] = useState(false)\n\n  const dispatch = useDispatch()\n\n  const residentDetails = useSelector((state) => state.residentDetails)\n  const { loading, error, resident } = residentDetails\n\n  const residentUpdate = useSelector((state) => state.residentUpdate)\n  const {\n    loading: loadingUpdate,\n    error: errorUpdate,\n    success: successUpdate,\n  } = residentUpdate\n\n  useEffect(() => {\n    if (successUpdate) {\n      dispatch({ type: RESIDENT_UPDATE_RESET })\n      history.push('/profiling')\n    } else {\n      if (resident._id !== residentId) {\n        dispatch(listResidentDetails(residentId))\n      } else {\n        setIdNumber(resident.idNumber)\n        setFirstName(resident.firstName)\n        setLastName(resident.lastName)\n        setMiddleName(resident.middleName)\n        setImage(resident.image)\n        setAge(resident.age)\n        setBirthDay(resident.birthDay)\n        setSex(resident.sex)\n        setPhoneNumber(resident.phoneNumber)\n        setPresentAddress(resident.presentAddress)\n        setCurrentAddress(resident.currentAddress)\n        setSitio(resident.sitio)\n        setIsVoter(resident.isVoter)\n        setIsDead(resident.isDead)\n        setBlotter(resident.blotter)\n      }\n    }\n  }, [dispatch, history, residentId, resident, successUpdate])\n\n  const uploadFileHandler = async (e) => {\n    const file = e.target.files[0]\n    const formData = new FormData()\n    formData.append('image', file)\n    setUploading(true)\n\n    try {\n      const config = {\n        headers: {\n          'Content-Type': 'multipart/form-data',\n        },\n      }\n\n      const { data } = await axios.post('/api/upload', formData, config)\n\n      setImage(data)\n      setUploading(false)\n    } catch (error) {\n      console.error(error)\n      setUploading(false)\n    }\n  }\n\n  const calcAge = (bday) => {\n    const from = bday.split('-')\n    const birthdateTimeStamp = new Date(from[0], from[1] - 1, from[2])\n    const cur = new Date()\n    const diff = cur - birthdateTimeStamp\n    // This is the difference in milliseconds\n    const currentAge = Math.floor(diff / 31557600000)\n    // Divide by 1000*60*60*24*365.25\n    return currentAge\n  }\n\n  const displayEmpty = (editDisplay) => {\n    editDisplay === 'sample' ? (editDisplay = '') : (editDisplay = editDisplay)\n    return editDisplay\n  }\n\n  const submitHandler = (e) => {\n    e.preventDefault()\n    dispatch(\n      updateResident({\n        _id: residentId,\n        idNumber,\n        firstName,\n        middleName,\n        lastName,\n        image,\n        age: calcAge(birthDay),\n        sex,\n        birthDay,\n        phoneNumber,\n        presentAddress,\n        currentAddress,\n        sitio,\n        isVoter,\n        isDead,\n        blotter,\n      })\n    )\n  }\n\n  return (\n    <>\n      <FormContainerResident>\n        {resident.firstName === 'sample' ? (\n          <h1>Add Resident</h1>\n        ) : (\n          <h1>Edit Resident</h1>\n        )}\n        {loadingUpdate && <Loader />}\n        {errorUpdate && <Message variant=\"danger\">{errorUpdate}</Message>}\n        {loading ? (\n          <Loader />\n        ) : error ? (\n          <Message variant=\"danger\">{error}</Message>\n        ) : (\n          <Form onSubmit={submitHandler}>\n            <Form.Group controlId=\"idNumber\">\n              <Form.Label>ID Number</Form.Label>\n              <Form.Control\n                placeholder=\"1234 Main St\"\n                value={displayEmpty(idNumber)}\n                onChange={(e) => setIdNumber(e.target.value)}\n              />\n            </Form.Group>\n            <Form.Row>\n              <Form.Group as={Col} controlId=\"firstName\">\n                <Form.Label>First Name</Form.Label>\n                <Form.Control\n                  type=\"text\"\n                  placeholder=\"Enter First Name\"\n                  value={displayEmpty(firstName)}\n                  onChange={(e) => setFirstName(e.target.value)}\n                />\n              </Form.Group>\n              <Form.Group as={Col} controlId=\"middleName\">\n                <Form.Label>Middle Name</Form.Label>\n                <Form.Control\n                  type=\"text\"\n                  placeholder=\"Enter Middle Name\"\n                  value={displayEmpty(middleName)}\n                  onChange={(e) => setMiddleName(e.target.value)}\n                />\n              </Form.Group>\n              <Form.Group as={Col} controlId=\"lastName\">\n                <Form.Label>Last Name</Form.Label>\n                <Form.Control\n                  type=\"text\"\n                  placeholder=\"Enter Last Name\"\n                  value={displayEmpty(lastName)}\n                  onChange={(e) => setLastName(e.target.value)}\n                />\n              </Form.Group>\n            </Form.Row>\n            <Form.Group controlId=\"presentAddress\">\n              <Form.Label>Present Address</Form.Label>\n              <Form.Control\n                placeholder=\"1234 Main St\"\n                value={displayEmpty(presentAddress)}\n                onChange={(e) => setPresentAddress(e.target.value)}\n              />\n            </Form.Group>\n\n            <Form.Group controlId=\"currentAddress\">\n              <Form.Label>Permanent Address</Form.Label>\n              <Form.Control\n                placeholder=\"Apartment, studio, or floor\"\n                value={displayEmpty(currentAddress)}\n                onChange={(e) => setCurrentAddress(e.target.value)}\n              />\n            </Form.Group>\n            <Form.Group controlId=\"phoneNumber\">\n              <Form.Label>Phone Number</Form.Label>\n              <Form.Control\n                maxlength=\"11\"\n                placeholder=\"0917.......\"\n                value={displayEmpty(phoneNumber)}\n                onChange={(e) => setPhoneNumber(e.target.value)}\n              />\n            </Form.Group>\n            <Form.Row>\n              <Form.Group as={Col} controlId=\"birthDay\">\n                <Form.Label>BirthDay</Form.Label>\n                <Form.Control\n                  type=\"date\"\n                  placeholder=\"Enter Birthday\"\n                  value={displayEmpty(birthDay)}\n                  onChange={(e) => setBirthDay(e.target.value)}\n                />\n              </Form.Group>\n              <Form.Group as={Col} controlId=\"age\">\n                <Form.Label>Age</Form.Label>\n                <Form.Control\n                  type=\"text\"\n                  placeholder=\"age\"\n                  value={calcAge(birthDay)}\n                  onChange={(e) => setAge(e.target.value)}\n                />\n              </Form.Group>\n            </Form.Row>\n            <Form.Row>\n              <Form.Group as={Col} controlId=\"sex\">\n                <Form.Label>Gender</Form.Label>\n                <Form.Control\n                  as=\"select\"\n                  defaultValue=\"Choose...\"\n                  value={displayEmpty(sex)}\n                  onChange={(e) => setSex(e.target.value)}\n                >\n                  <option>Male</option>\n                  <option>Female</option>\n                </Form.Control>\n              </Form.Group>\n\n              <Form.Group as={Col} controlId=\"sitio\">\n                <Form.Label>Sitio</Form.Label>\n                <Form.Control\n                  as=\"select\"\n                  defaultValue=\"Choose...\"\n                  value={displayEmpty(sitio)}\n                  onChange={(e) => setSitio(e.target.value)}\n                >\n                  <option>Calamansi</option>\n                  <option>Lanzones</option>\n                  <option>Mansanas</option>\n                  <option>Niyugan</option>\n                  <option>Palayan</option>\n                  <option>Sampaloc</option>\n                  <option>Sinturis</option>\n                </Form.Control>\n              </Form.Group>\n            </Form.Row>\n            <Form.Group as={Col} controlId=\"image\">\n              <Form.Label>Image</Form.Label>\n              <Form.Control\n                type=\"text\"\n                placeholder=\"image url\"\n                value={displayEmpty(image)}\n                onChange={(e) => setImage(e.target.value)}\n              ></Form.Control>\n              <Form.File\n                id=\"image-file\"\n                label=\"Choose File\"\n                custom\n                onChange={uploadFileHandler}\n              ></Form.File>\n              {uploading && <Loader />}\n            </Form.Group>\n\n            <Form.Group id=\"isVoter\">\n              <Form.Check\n                type=\"checkbox\"\n                label=\"Registered Voter?\"\n                checked={isVoter}\n                onChange={(e) => setIsVoter(e.target.checked)}\n              />\n            </Form.Group>\n            <Form.Group id=\"isDead\">\n              <Form.Check\n                type=\"checkbox\"\n                label=\"Registered Deceased?\"\n                checked={isDead}\n                onChange={(e) => setIsDead(e.target.checked)}\n              />\n            </Form.Group>\n            <Form.Group id=\"blotter\">\n              <Form.Check\n                type=\"checkbox\"\n                label=\"Resident involved in a blotter?\"\n                checked={blotter}\n                onChange={(e) => setBlotter(e.target.checked)}\n              />\n            </Form.Group>\n\n            <Button variant=\"primary\" type=\"submit\">\n              Submit\n            </Button>\n          </Form>\n        )}\n      </FormContainerResident>\n    </>\n  )\n}\n\nexport default ResidentEditScreen\n"]},"metadata":{},"sourceType":"module"}